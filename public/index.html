<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>HtS</title>
    <link rel="stylesheet" href="css/style.css" type="text/css"/>
    <!-- Bootstrap -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="main-content">
        <h1>Hype Machine to Spotify</h1>
        <button data-bind="click: $root.getAccessToken">Login</button><br/>
        <input data-bind="value: hypemURL"/>
        <button data-bind="click: $root.getHypemUrlDetails">Get Page Info</button>
        
        <div>
          <h3>Page Info</h3>
          <label>Json Url</label> <span data-bind="text: pageInfo.jsonUrl"> </span><br/>
          <label>Pages</label> <span data-bind="text: pageInfo.pages"></span><br/>
          <label>Approx Songs</label> <span data-bind="text: pageInfo.songs"></span><br/>
        </div>
        <div>
          <button data-bind="disable: pageInfo.pageFetchStatus().length == 0, click: $root.getTracksFromAllHypemPages">Get songs from page</button>
          <table class="table table-condensed">
              <thead>
                  <tr>
                    <th>Page</th>
                    <th>Status</th>
                  </tr>
              </thead>
              <tbody data-bind="foreach: pageInfo.pageFetchStatus">
                  <tr>
                      <td data-bind="text: url"></td>
                      <td>
                        <span data-bind="visible: !hasFetchedTracks()">Needs to fetch tracks</span>
                        <span data-bind="visible: hasFetchedTracks() && erorrOnFetch()">Error on fetch</span>
                        <span data-bind="visible: hasFetchedTracks() && !erorrOnFetch()">Tracks Fetched</span>
                      </td>
                  </tr>
              </tbody>
          </table>
        </div>

        <div>
          <button data-bind="click: $root.getSelectedSongs">Find Spotify Version</button>
          <button data-bind="click: $root.removeAllFeaturing">Remove Featuring</button>
          <span data-bind="text: found"></span>/<span data-bind="text: songs().length"></span>
          <br/>
          <select data-bind="options: spotify.playlists, optionsText: 'display', optionsValue: 'id', value: selectedPlaylist"></select>
          <button data-bind="click: $root.addSongsToPlaylist">Add to Playlist</button>
        </div>
        <div>
          <table class="table table-condensed">
              <thead>
                  <tr data-bind="foreach: headers">
                    <th data-bind="click: $root.sort, text: title"></th>
                  </tr>
              </thead>
              <tbody data-bind="foreach: songs">
                  <tr>
                      <td data-bind="text: page"></td>
                      <td data-bind="text: artist()"></td>
                      <td data-bind="text: title()"></td>
                      <td data-bind="text: foundArtist()"></td>
                      <td data-bind="text: foundTitle()"></td>
                  </tr>
              </tbody>
          </table>
        </div>
    </div>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.2.0/knockout-min.js"></script>
	<script src="/js/core.js"></script>
	<script src="/js/defaultViewModel.js"></script>
  </body>
</html>
